<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Add Max - It all adds up</title>
        <link rel="stylesheet" href="css/bootstrap.min.css" />
    </head>
    <body onload="generateRandomAddition()">
        <div class="container-sm border border-dark mt-5">
            <div class="display-1 text-center">
                <span id="firstValue"></span>
                <span> + </span>
                <span id="secondValue">0</span>
                <span> = </span>
                <span id="result">?</span>
            </div>
            <div class="d-grid gap-2 m-4">
                <button id="option1" class="btn btn-outline-dark btn-lg" onclick="checkResult(1)"></button>
                <button id="option2" class="btn btn-outline-dark btn-lg" onclick="checkResult(2)"></button>
                <button id="option3" class="btn btn-outline-dark btn-lg" onclick="checkResult(3)"></button>
            </div>
        </div>

        <script>
            function generateRandomAddition() {
                var firstValue = randomInt(1, 10);
                var secondValue = randomInt(1, 10);
                var result = firstValue + secondValue;
                document.getElementById("firstValue").innerHTML = firstValue;
                document.getElementById("secondValue").innerHTML = secondValue;
                generateAnswerOptions();
            }

            function checkResult(option) {
                var trueAnswer = calculateTrueAnswer();
                var selectedAnswer = Number(document.getElementById("option" + option).innerText);

                document.getElementById("option" + option).classList.remove('btn-outline-dark');

                if (selectedAnswer == trueAnswer)
                {
                    document.getElementById("option" + option).classList.add('btn-success');
                }                    
                else
                {
                    document.getElementById("option" + option).classList.add('btn-danger');
                }
                
                document.getElementById("feedback").innerHTML = feedback;   
                    
                document.getElementById("result").innerText = trueAnswer;
            }

            function generateAnswerOptions() {
                var trueAnswer = calculateTrueAnswer();                
                var fakeAnswer1 = generateFakeAnswer(trueAnswer);
                var fakeAnswer2 = generateFakeAnswer(trueAnswer);

                while (fakeAnswer2 == fakeAnswer1 || fakeAnswer2 == trueAnswer)
                    fakeAnswer2 = fakeAnswer2 + 1;

                const answers = [trueAnswer, fakeAnswer1, fakeAnswer2];
                answers.sort();

                document.getElementById("option1").innerText = answers[0];
                document.getElementById("option2").innerText = answers[1];
                document.getElementById("option3").innerText = answers[2];
            }

            function calculateTrueAnswer() {
                var firstValue =  Number(document.getElementById("firstValue").innerText);
                var secondValue = Number(document.getElementById("secondValue").innerText);
                return firstValue + secondValue;
            }

            function generateFakeAnswer(trueAnswer) {
                var maxOffset = Math.floor(0.5 * trueAnswer);
                var minOffset = -1 * maxOffset;
                var offset = randomInt(minOffset, maxOffset);

                if (trueAnswer + offset <= 0)
                    return 1;

                if (offset == 0)
                    return trueAnswer + 1;

                return trueAnswer + offset;
            }

            function randomInt(min, max) {
                return Math.floor(Math.random() * (max - min) ) + min;
            }
        </script>
    </body>
</html>